\documentclass{beamer}

% --- TEMA ȘI CULORI ---
\usetheme{Madrid} % Sau 'Berlin', 'Frankfurt', 'Metropolis'
\usecolortheme{beaver} % Schemă de culori (Roșu/Gri)

% --- PACHETE NECESARE ---
\usepackage[utf8]{inputenc}
\usepackage[romanian]{babel}
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{shadows, positioning, arrows.meta, calc, shapes, fit, backgrounds}

% --- INFORMAȚII TITLU ---
\title[Kerberos]{Kerberos: Un serviciu de autentificare pentru sisteme Open Network}
\subtitle{Proiect Final - Sisteme Distribuite}
\author[Echipa Kerberos]{Prioteasa Liviu Florentin \and Rizescu Iulian Ştefan \and Ţacu Ştefan Darius}
\institute[FMI]{Facultatea de Matematică și Informatică, Universitatea din București}
\date{Ianuarie 2026}

\begin{document}

% Slide 1: Titlu și Echipă
\begin{frame}
  \titlepage
\end{frame}

\begin{frame}{Context și Problemă}
  % Partea de Context
  \begin{itemize}
    \item \textbf{Context:} Tranziția de la sisteme monolitice (acces \textit{Serial/Local}) la sisteme distribuite (acces prin \textit{Rețea}).
  \end{itemize}

  \vspace{0.5cm}

  % Partea de Problemă (Listă încapsulată)
  \begin{block}{Problema: Mediul "Open Network" este nesigur}
    \begin{itemize}
      \item \textbf{Sniffing:} Atacatorii pot intercepta pachetele de date care circulă pe cablu/Wi-Fi.
      \item \textbf{Spoofing:} Adresele IP nu sunt o dovadă suficientă a identității (pot fi falsificate).
    \end{itemize}
  \end{block}

  \vspace{0.5cm}

  % Întrebarea Cheie (Evidențiată distinct)
  \begin{alertblock}{Întrebare Cheie}
    Cum demonstrăm identitatea unui utilizator fără a trimite parola în clar prin rețea?
  \end{alertblock}
\end{frame}

\begin{frame}{Soluția - Trusted Third Party (TTP)}

  % Conceptul de bază
  \begin{block}{Concept}
    Introducerea unei autorități centrale de încredere, denumită \textbf{KDC (Key Distribution Center)}.
  \end{block}

  \vspace{0.5cm}

  % Rolurile sistemului
  \textbf{Roluri și Arhitectură:}
  \begin{itemize}
    \item \textbf{Elimină redundanța riscantă:} Nu mai este necesar ca fiecare server din rețea să stocheze parolele utilizatorilor.
    \item \textbf{Fortificare:} Centralizează administrarea securității într-un singur punct critic, care poate fi protejat intens.
  \end{itemize}

  \vspace{0.5cm}

  % Elementul Cheie (SSO) - Evidențiat
  \begin{alertblock}{Element Cheie}
    Utilizatorul se autentifică o singură dată (\textbf{Single Sign-On}) și primește "bilete" (\textit{Tichete}) pe care le folosește ulterior, fără a mai introduce parola.
  \end{alertblock}

\end{frame}

\begin{frame}{Faza 1: Autentificarea Inițială (AS Exchange)}

  \begin{columns}[c] % Aliniere verticală pe centru

    % --- COLOANA STÂNGA (Text) ---
    \begin{column}{0.5\textwidth}
      \begin{itemize}
        \item \textbf{Scop:} Obținerea "Permisului Universal" (\textbf{TGT} - Ticket Granting Ticket).
        \item \textbf{Mecanism:}
              \begin{itemize}
                \item Utilizator $\rightarrow$ AS: Trimite cererea (ID).
                \item AS $\rightarrow$ Utilizator: Răspunde cu TGT-ul criptat (folosind cheia TGS).
              \end{itemize}
      \end{itemize}

      \vspace{0.3cm}

      % Evidențiem securitatea ca la slide-ul 5
      \begin{alertblock}{Detaliu de Securitate}
        Parola utilizatorului este folosită \textbf{doar local} pentru a decripta răspunsul. Ea nu este trimisă niciodată prin rețea.
      \end{alertblock}
    \end{column}

    % --- COLOANA DREAPTA (Diagrama) ---
    \begin{column}{0.5\textwidth}
      \begin{figure}
        \centering
        % Scalăm diagrama la lățimea coloanei curente
        \resizebox{\linewidth}{!}{%
          \input{chapters/figures/as_exchange.tex}
        }
        \caption{Fluxul AS Exchange}
      \end{figure}
    \end{column}

  \end{columns}

\end{frame}

\begin{frame}{Faza 2: Obținerea Accesului (TGS Exchange)}



  % --- ÎNCEPUT STRUCTURĂ PE COLOANE ---
  \begin{columns}[c] % [c] = aliniere verticală pe centru

    % --- COLOANA STÂNGA (Text / AlertBlock) ---
    \begin{column}{0.4\textwidth}

      \begin{itemize}
        \item \textbf{Scop:} Obținerea tichetului pentru un serviciu specific.
        \item \textbf{Mecanism:} Clientul prezintă TGT-ul + un Authenticator.
      \end{itemize}

      \begin{alertblock}{Securitate: Replay}
        Serverul TGS verifică dacă timestamp-ul este recent ($< 5$ min).

        Pachetele vechi sunt respinse imediat.
      \end{alertblock}
    \end{column}

    % --- COLOANA DREAPTA (Diagrama) ---
    \begin{column}{0.6\textwidth}
      \begin{figure}
        \centering
        % Important: Folosim \linewidth pentru a se încadra în coloană
        \resizebox{\linewidth}{!}{%
          \input{chapters/figures/tgs_exchange.tex}
        }
        \caption{Fluxul TGS Exchange}
      \end{figure}
    \end{column}

  \end{columns}
  % --- SFÂRȘIT COLOANE ---

\end{frame}

\begin{frame}{Faza 3: Accesarea Serviciului (Client-Server)}

  \begin{columns}[c] % Aliniere verticală pe centru

    % --- COLOANA STÂNGA (Text) ---
    \begin{column}{0.5\textwidth}
      \begin{itemize}
        \item \textbf{Scop:} Accesul efectiv la resursa dorită.
        \item \textbf{Mecanism:} Clientul prezintă serverului:
              \begin{itemize}
                \item \textbf{Tichetul de Serviciu} ($T_{Serv}$).
                \item Un nou Authenticator pentru a dovedi identitatea.
              \end{itemize}
      \end{itemize}

      \vspace{0.3cm}

      % Blocul Stateless - Punct cheie
      \begin{block}{Rezultat: Sistem Stateless}
        Serverul acceptă cererea și validează tichetul local, \textbf{fără a comunica cu KDC-ul}.

        KDC-ul nu este interogat la fiecare accesare, asigurând scalabilitatea.
      \end{block}
    \end{column}

    % --- COLOANA DREAPTA (Diagrama) ---
    \begin{column}{0.5\textwidth}
      \begin{figure}
        \centering
        % Scalăm diagrama la lățimea coloanei
        \resizebox{\linewidth}{!}{%
          \input{chapters/figures/cs_exchange.tex}
        }
        \caption{Fluxul Client-Server}
      \end{figure}
    \end{column}

  \end{columns}

\end{frame}

\begin{frame}{Replicare și Disponibilitate}

  \begin{columns}[c]
    \begin{column}{0.5\textwidth}
      \begin{itemize}
        \item \textbf{Arhitectura:} Tip \textbf{Master-Slave}.
        \item \textbf{Master KDC:}
              \begin{itemize}
                \item Deține copia autoritativă (Read-Write).
                \item Singurul care acceptă scrieri (ex: schimbarea parolei).
              \end{itemize}
        \item \textbf{Slave KDCs:}
              \begin{itemize}
                \item Dețin copii Read-Only actualizate periodic.
                \item Asigură \textbf{disponibilitatea} în rețea.
              \end{itemize}
      \end{itemize}
    \end{column}

    \begin{column}{0.5\textwidth}
      \begin{figure}
        \centering
        \resizebox{\linewidth}{!}{%
          \input{chapters/figures/master_slave.tex}
        }
        \caption{Arhitectura de Replicare}
      \end{figure}
    \end{column}
  \end{columns}

\end{frame}

\begin{frame}{Analiză Teoretică: Corectitudine și Complexitate}
  \small % Micșorăm puțin fontul pentru a încăpea tot textul

  % Blocul 1: Analiza Corectitudinii
  \begin{block}{Corectitudine și Dependențe}
    \begin{itemize}
      \item \textbf{Sincronizarea Ceasurilor (Time Skew):}
            Deoarece protocolul se bazează pe \textit{Timestamp-uri} pentru a preveni atacurile, este critică sincronizarea prin NTP. O deviație $>5$ minute duce la respingerea tichetelor.
      \item \textbf{Integritatea KDC (TTP):}
            Securitatea este centralizată. Compromiterea cheii Master a KDC-ului permite crearea de \textit{"Golden Tickets"} (impersonare totală).
    \end{itemize}
  \end{block}

  \vspace{0.2cm} % Spațiu redus (era 0.5cm)

  % Blocul 2: Analiza Performanței
  \begin{block}{Performanță și Eficiență}
    \begin{itemize}
      \item \textbf{Complexitate de Rețea:} $\mathcal{O}(1)$.
            Protocolul necesită un număr constant de mesaje (\textbf{6 pachete}), indiferent de numărul de utilizatori.
      \item \textbf{Eficiență Computațională:}
            Utilizează exclusiv \textbf{criptare simetrică} (AES/DES), care este mult mai rapidă decât cea asimetrică (RSA), reducând încărcarea pe CPU.
    \end{itemize}
  \end{block}

\end{frame}

\begin{frame}{Topologii Avansate (1/2): Cross-Realm Authentication}
  \small % Revenim la \small, acum avem loc

  % 1. Blocul Problemă pe toată lățimea (sus)
  \begin{block}{Problemă: Limitarea KDC-ului Unic}
    Într-o companie globală, gestionarea tuturor utilizatorilor într-o singură bază de date este imposibilă (latenta rețelei, gât de sticlă).
  \end{block}

  \vspace{0.3cm}

  % 2. Coloane Inegale (Jos)
  \begin{columns}[c] % Aliniere verticală pe centru

    % --- COLOANA STÂNGA (40%) - Soluția și Pașii ---
    \begin{column}{0.4\textwidth}
      \textbf{Soluție:} Cross-Realm Authentication.

      \vspace{0.2cm}
      \textbf{Fluxul de operare:}
      \begin{enumerate}
        \item Client (Realm A) cere acces în Realm B.
        \item KDC A emite un \textbf{"Remote TGT"}.
        \item KDC B validează TGT-ul și emite tichetul.
      \end{enumerate}
    \end{column}

    % --- COLOANA DREAPTA (60%) - Diagrama ---
    \begin{column}{0.6\textwidth}
      \begin{figure}
        \centering
        % Diagrama se va scala la lățimea coloanei (60% din slide)
        % sau maxim 60% din înălțime, ca să nu iasă din pagină
        \resizebox{\linewidth}{!}{%
          \input{chapters/figures/cross_realm.tex}
        }
        \caption{Flux Cross-Realm}
      \end{figure}
    \end{column}

  \end{columns}

\end{frame}

\begin{frame}{Topologii Avansate (2/2): Delegare (Proxy)}
  \small

  % Blocul Problemă (Sus, toată lățimea)
  \begin{block}{Problemă: Accesul Indirect}
    Un serviciu intermediar (ex: \textit{Print Server}) trebuie să acceseze o resursă protejată \textbf{în numele utilizatorului}, dar nu deține parola acestuia.
  \end{block}

  \vspace{0.2cm}

  \begin{columns}[c]

    % --- COLOANA STÂNGA (Mai lată pentru text - 65%) ---
    \begin{column}{0.65\textwidth}
      \textbf{Soluție:} Proxy Tickets.

      \vspace{0.2cm}
      \textbf{Mecanism:}
      \begin{itemize}
        \item Utilizatorul emite un tichet special care \textbf{deleagă} drepturile sale către Print Server.
        \item Tichetul conține restricții (adresă IP, timp de viață scurt).
        \item Serviciul intermediar îl prezintă mai departe ca dovadă.
      \end{itemize}
    \end{column}

    % --- COLOANA DREAPTA (Mai îngustă pentru diagrama înaltă - 35%) ---
    \begin{column}{0.35\textwidth}
      \begin{figure}
        \centering
        % CHEIA SUCCESULUI: Scalăm după ÎNĂLȚIME, nu lățime!
        % ! la lățime înseamnă "păstrează proporția".
        % 0.6\textheight înseamnă "maxim 60% din înălțimea slide-ului"
        \resizebox{!}{0.40\textheight}{%
          \input{chapters/figures/proxy_topology.tex}
        }
        \caption{Topologie Proxy}
      \end{figure}
    \end{column}

  \end{columns}

\end{frame}

\end{document}